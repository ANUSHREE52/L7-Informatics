{% extends 'expenses/base.html' %}

{% block title %}Settings - Expense Tracker{% endblock %}

{% block header %}
    <h1 class="h3 mb-0">Settings</h1>
    <nav aria-label="breadcrumb" class="mt-2">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'expenses:dashboard' %}">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Settings</li>
        </ol>
    </nav>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-3">
        <div class="card mb-4">
            <div class="card-body p-0">
                <div class="list-group list-group-flush">
                    <a href="#general-settings" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                        <i class="bi bi-gear me-2"></i> General
                    </a>
                    <a href="#notification-settings" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-bell me-2"></i> Notifications
                    </a>
                    <a href="#privacy-settings" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-shield-lock me-2"></i> Privacy & Security
                    </a>
                    <a href="#import-export" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-arrow-left-right me-2"></i> Import & Export
                    </a>
                    <a href="#billing" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-credit-card me-2"></i> Billing & Subscription
                    </a>
                    <a href="#integrations" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-puzzle me-2"></i> Integrations
                    </a>
                    <a href="#advanced" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-sliders me-2"></i> Advanced
                    </a>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-body text-center">
                <div class="mb-3">
                    <i class="bi bi-shield-check text-primary" style="font-size: 2.5rem;"></i>
                    <h5 class="mt-2">Security Status</h5>
                    <div class="progress mb-2" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 85%" 
                             aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <p class="small text-muted mb-0">Your account security is strong</p>
                </div>
                <a href="{% url 'expenses:profile' %}" class="btn btn-outline-primary btn-sm w-100">
                    <i class="bi bi-person me-1"></i> View Profile
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-9">
        <div class="tab-content">
            <!-- General Settings -->
            <div class="tab-pane fade show active" id="general-settings">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">General Settings</h5>
                    </div>
                    <div class="card-body">
                        <form id="generalSettingsForm">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="language" class="form-label">Language</label>
                                    <select class="form-select" id="language">
                                        <option value="en" selected>English</option>
                                        <option value="es">Español</option>
                                        <option value="fr">Français</option>
                                        <option value="de">Deutsch</option>
                                        <option value="ja">日本語</option>
                                        <option value="zh">中文</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="timezone" class="form-label">Time Zone</label>
                                    <select class="form-select" id="timezone">
                                        <option value="UTC">(UTC) Coordinated Universal Time</option>
                                        <option value="EST" selected>(UTC-05:00) Eastern Time</option>
                                        <option value="PST">(UTC-08:00) Pacific Time</option>
                                        <option value="IST">(UTC+05:30) India Standard Time</option>
                                        <option value="JST">(UTC+09:00) Japan Standard Time</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="dateFormat" class="form-label">Date Format</label>
                                    <select class="form-select" id="dateFormat">
                                        <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                        <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                        <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="timeFormat" class="form-label">Time Format</label>
                                    <select class="form-select" id="timeFormat">
                                        <option value="12">12-hour (3:45 PM)</option>
                                        <option value="24">24-hour (15:45)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="currency" class="form-label">Default Currency</label>
                                <select class="form-select" id="currency">
                                    <option value="USD" data-symbol="$" selected>US Dollar ($)</option>
                                    <option value="EUR" data-symbol="€">Euro (€)</option>
                                    <option value="GBP" data-symbol="£">British Pound (£)</option>
                                    <option value="JPY" data-symbol="¥">Japanese Yen (¥)</option>
                                    <option value="INR" data-symbol="₹">Indian Rupee (₹)</option>
                                </select>
                            </div>
                            
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="useCommas" checked>
                                <label class="form-check-label" for="useCommas">Use comma as thousand separator</label>
                            </div>
                            
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="startWeekOnMonday">
                                <label class="form-check-label" for="startWeekOnMonday">Start week on Monday</label>
                            </div>
                            
                            <div class="d-flex justify-content-end">
                                <button type="button" class="btn btn-primary">
                                    <i class="bi bi-save me-1"></i> Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Appearance</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Theme</label>
                            <div class="d-flex flex-wrap gap-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="theme" id="lightTheme" value="light" checked>
                                    <label class="form-check-label d-flex flex-column align-items-center" for="lightTheme">
                                        <div class="theme-preview light mb-1"></div>
                                        <span>Light</span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="theme" id="darkTheme" value="dark">
                                    <label class="form-check-label d-flex flex-column align-items-center" for="darkTheme">
                                        <div class="theme-preview dark mb-1"></div>
                                        <span>Dark</span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="theme" id="systemTheme" value="system">
                                    <label class="form-check-label d-flex flex-column align-items-center" for="systemTheme">
                                        <div class="theme-preview system mb-1"></div>
                                        <span>System</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="compactView">
                            <label class="form-check-label" for="compactView">Use compact view (show more content on screen)</label>
                        </div>
                        
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="showAvatars" checked>
                            <label class="form-check-label" for="showAvatars">Show profile pictures</label>
                        </div>
                        
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="showAnimations" checked>
                            <label class="form-check-label" for="showAnimations">Enable animations</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Notification Settings -->
            <div class="tab-pane fade" id="notification-settings">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Notification Preferences</h5>
                    </div>
                    <div class="card-body">
                        <form id="notificationSettingsForm">
                            <h6 class="mb-3">Email Notifications</h6>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                                <label class="form-check-label" for="emailNotifications">Enable email notifications</label>
                            </div>
                            
                            <div id="emailNotificationOptions" class="ms-4 mb-4">
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailTransactionAlerts" checked>
                                    <label class="form-check-label" for="emailTransactionAlerts">Transaction alerts</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailBudgetAlerts" checked>
                                    <label class="form-check-label" for="emailBudgetAlerts">Budget alerts</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailWeeklyReports" checked>
                                    <label class="form-check-label" for="emailWeeklyReports">Weekly reports</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailMonthlyReports" checked>
                                    <label class="form-check-label" for="emailMonthlyReports">Monthly reports</label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="emailPromotions" checked>
                                    <label class="form-check-label" for="emailPromotions">Product updates and promotions</label>
                                </div>
                            </div>
                            
                            <h6 class="mb-3 mt-4">Push Notifications</h6>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="pushNotifications" checked>
                                <label class="form-check-label" for="pushNotifications">Enable push notifications</label>
                            </div>
                            
                            <div id="pushNotificationOptions" class="ms-4 mb-4">
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="pushTransactionAlerts" checked>
                                    <label class="form-check-label" for="pushTransactionAlerts">Transaction alerts</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="pushBudgetAlerts" checked>
                                    <label class="form-check-label" for="pushBudgetAlerts">Budget alerts</label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="pushBillReminders" checked>
                                    <label class="form-check-label" for="pushBillReminders">Bill reminders</label>
                                </div>
                            </div>
                            
                            <h6 class="mb-3 mt-4">In-App Notifications</h6>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="inAppTransactionAlerts" checked>
                                <label class="form-check-label" for="inAppTransactionAlerts">Transaction alerts</label>
                            </div>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="inAppBudgetAlerts" checked>
                                <label class="form-check-label" for="inAppBudgetAlerts">Budget alerts</label>
                            </div>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="inAppBillReminders" checked>
                                <label class="form-check-label" for="inAppBillReminders">Bill reminders</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="inAppPromotions" checked>
                                <label class="form-check-label" for="inAppPromotions">Product updates and tips</label>
                            </div>
                            
                            <div class="d-flex justify-content-end mt-4">
                                <button type="button" class="btn btn-primary">
                                    <i class="bi bi-save me-1"></i> Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Privacy & Security Settings -->
            <div class="tab-pane fade" id="privacy-settings">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Privacy & Security</h5>
                    </div>
                    <div class="card-body">
                        <form id="privacySettingsForm">
                            <h6 class="mb-3">Account Security</h6>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="twoFactorAuth">
                                <label class="form-check-label" for="twoFactorAuth">
                                    Two-Factor Authentication (2FA)
                                    <span class="badge bg-success ms-2">Recommended</span>
                                </label>
                                <div class="form-text">Add an extra layer of security to your account</div>
                            </div>
                            
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="loginAlerts" checked>
                                <label class="form-check-label" for="loginAlerts">
                                    Login Alerts
                                </label>
                                <div class="form-text">Get notified when someone logs into your account from a new device</div>
                            </div>
                            
                            <div class="form-check form-switch mb-4">
                                <input class="form-check-input" type="checkbox" id="saveLoginInfo" checked>
                                <label class="form-check-label" for="saveLoginInfo">
                                    Save Login Information
                                </label>
                                <div class="form-text">Stay logged in on this device</div>
                            </div>
                            
                            <h6 class="mb-3">Privacy</h6>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="dataCollection" checked>
                                <label class="form-check-label" for="dataCollection">
                                    Allow data collection for analytics
                                </label>
                                <div class="form-text">Help us improve our services by sharing usage data</div>
                            </div>
                            
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="personalizedAds" checked>
                                <label class="form-check-label" for="personalizedAds">
                                    Personalized ads
                                </label>
                                <div class="form-text">See ads that are more relevant to you</div>
                            </div>
                            
                            <div class="form-check form-switch mb-4">
                                <input class="form-check-input" type="checkbox" id="showInSearch" checked>
                                <label class="form-check-label" for="showInSearch">
                                    Make my profile discoverable
                                </label>
                                <div class="form-text">Allow other users to find you by email</div>
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h6 class="mb-1">Download Your Data</h6>
                                    <p class="text-muted small mb-0">Request a copy of all your personal data</p>
                                </div>
                                <button type="button" class="btn btn-outline-primary">
                                    <i class="bi bi-download me-1"></i> Request Data
                                </button>
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">Delete Account</h6>
                                    <p class="text-muted small mb-0">Permanently delete your account and all data</p>
                                </div>
                                <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">
                                    <i class="bi bi-trash me-1"></i> Delete Account
                                </button>
                            </div>
                            
                            <div class="d-flex justify-content-end mt-4">
                                <button type="button" class="btn btn-primary">
                                    <i class="bi bi-save me-1"></i> Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Import & Export -->
            <div class="tab-pane fade" id="import-export">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Import & Export Data</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body text-center">
                                        <div class="bg-soft-primary text-primary rounded-circle p-3 d-inline-block mb-3">
                                            <i class="bi bi-upload" style="font-size: 1.5rem;"></i>
                                        </div>
                                        <h5>Import Data</h5>
                                        <p class="text-muted">Import transactions, budgets, and more from other services</p>
                                        
                                        <div class="d-grid gap-2">
                                            <button type="button" class="btn btn-outline-primary mb-2">
                                                <i class="bi bi-file-earmark-spreadsheet me-1"></i> Import from CSV
                                            </button>
                                            <button type="button" class="btn btn-outline-primary mb-2">
                                                <i class="bi bi-file-earmark-pdf me-1"></i> Import from PDF
                                            </button>
                                            <button type="button" class="btn btn-outline-primary">
                                                <i class="bi bi-bank me-1"></i> Connect Bank Account
                                            </button>
                                        </div>
                                        
                                        <div class="mt-3">
                                            <a href="#" class="text-muted small">View supported formats</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mt-3 mt-md-0">
                                <div class="card h-100">
                                    <div class="card-body text-center">
                                        <div class="bg-soft-success text-success rounded-circle p-3 d-inline-block mb-3">
                                            <i class="bi bi-download" style="font-size: 1.5rem;"></i>
                                        </div>
                                        <h5>Export Data</h5>
                                        <p class="text-muted">Export your data for backup or use in other applications</p>
                                        
                                        <div class="d-grid gap-2">
                                            <button type="button" class="btn btn-outline-success mb-2">
                                                <i class="bi bi-file-earmark-spreadsheet me-1"></i> Export to CSV
                                            </button>
                                            <button type="button" class="btn btn-outline-success mb-2">
                                                <i class="bi bi-file-earmark-pdf me-1"></i> Export to PDF
                                            </button>
                                            <button type="button" class="btn btn-outline-success">
                                                <i class="bi bi-file-earmark-zip me-1"></i> Full Backup
                                            </button>
                                        </div>
                                        
                                        <div class="mt-3">
                                            <a href="#" class="text-muted small">View export options</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-info mt-4">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-info-circle-fill"></i>
                                </div>
                                <div class="flex-grow-1 ms-2">
                                    <h6 class="alert-heading">Data Privacy</h6>
                                    <p class="mb-0">Your data is encrypted and stored securely. We never share your personal information with third parties without your explicit consent.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Billing & Subscription -->
            <div class="tab-pane fade" id="billing">
                <div class="card">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Billing & Subscription</h5>
                            <span class="badge bg-success">Active</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-body">
                                        <h6 class="card-title">Current Plan</h6>
                                        <h3 class="mb-3">Premium</h3>
                                        <p class="text-muted mb-4">All features included. Billed monthly.</p>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Next Billing Date</span>
                                            <strong>Jan 1, 2024</strong>
                                        </div>
                                        <div class="d-flex justify-content-between mb-4">
                                            <span>Payment Method</span>
                                            <div>
                                                <i class="bi bi-credit-card me-1"></i>
                                                <span>•••• •••• •••• 4242</span>
                                                <a href="#" class="ms-2">Change</a>
                                            </div>
                                        </div>
                                        <button class="btn btn-outline-danger w-100">
                                            <i class="bi bi-x-circle me-1"></i> Cancel Subscription
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title mb-4">Billing History</h6>
                                        <div class="table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Date</th>
                                                        <th>Description</th>
                                                        <th>Amount</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Dec 1, 2023</td>
                                                        <td>Premium Subscription</td>
                                                        <td>$9.99</td>
                                                        <td class="text-end">
                                                            <a href="#" class="btn btn-sm btn-outline-primary">Invoice</a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Nov 1, 2023</td>
                                                        <td>Premium Subscription</td>
                                                        <td>$9.99</td>
                                                        <td class="text-end">
                                                            <a href="#" class="btn btn-sm btn-outline-primary">Invoice</a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Oct 1, 2023</td>
                                                        <td>Premium Subscription</td>
                                                        <td>$9.99</td>
                                                        <td class="text-end">
                                                            <a href="#" class="btn btn-sm btn-outline-primary">Invoice</a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="text-center mt-3">
                                            <a href="#" class="btn btn-link">View All Transactions</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-body">
                                        <h6 class="card-title mb-4">Upgrade Your Plan</h6>
                                        
                                        <div class="pricing-option mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="plan" id="freePlan" checked>
                                                <label class="form-check-label w-100" for="freePlan">
                                                    <div class="d-flex justify-content-between">
                                                        <div>
                                                            <h6 class="mb-1">Free</h6>
                                                            <p class="text-muted small mb-0">Basic features for getting started</p>
                                                        </div>
                                                        <div class="text-end">
                                                            <span class="d-block fw-bold">$0</span>
                                                            <small class="text-muted">per month</small>
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="pricing-option mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="plan" id="premiumPlan">
                                                <label class="form-check-label w-100" for="premiumPlan">
                                                    <div class="d-flex justify-content-between">
                                                        <div>
                                                            <h6 class="mb-1">Premium</h6>
                                                            <p class="text-muted small mb-0">Advanced features for power users</p>
                                                        </div>
                                                        <div class="text-end">
                                                            <span class="d-block fw-bold">$9.99</span>
                                                            <small class="text-muted">per month</small>
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="pricing-option">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="plan" id="businessPlan">
                                                <label class="form-check-label w-100" for="businessPlan">
                                                    <div class="d-flex justify-content-between">
                                                        <div>
                                                            <h6 class="mb-1">Business</h6>
                                                            <p class="text-muted small mb-0">For teams and businesses</p>
                                                        </div>
                                                        <div class="text-end">
                                                            <span class="d-block fw-bold">$24.99</span>
                                                            <small class="text-muted">per user/month</small>
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <button class="btn btn-primary w-100">
                                                <i class="bi bi-arrow-up-circle me-1"></i> Upgrade Now
                                            </button>
                                            <p class="text-muted small text-center mt-2 mb-0">
                                                <i class="bi bi-shield-check text-success"></i> Secure payment processing by Stripe
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title mb-4">Payment Methods</h6>
                                        
                                        <div class="payment-method mb-3">
                                            <div class="d-flex justify-content-between align-items-center p-3 border rounded">
                                                <div class="d-flex align-items-center">
                                                    <div class="me-3">
                                                        <i class="bi bi-credit-card" style="font-size: 1.5rem;"></i>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0">Visa ending in 4242</h6>
                                                        <small class="text-muted">Expires 12/25</small>
                                                    </div>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="defaultPayment" checked>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="payment-method">
                                            <div class="d-flex justify-content-between align-items-center p-3 border rounded">
                                                <div class="d-flex align-items-center">
                                                    <div class="me-3">
                                                        <i class="bi bi-paypal text-primary" style="font-size: 1.5rem;"></i>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0">PayPal</h6>
                                                        <small class="text-muted">user@example.com</small>
                                                    </div>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="defaultPayment">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <button class="btn btn-outline-primary w-100 mt-3">
                                            <i class="bi bi-plus-circle me-1"></i> Add Payment Method
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Integrations -->
            <div class="tab-pane fade" id="integrations">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Integrations</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-4">Connect your favorite apps and services to enhance your experience.</p>
                        
                        <div class="row g-4">
                            <!-- Google Drive -->
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <div class="d-flex align-items-start">
                                            <div class="me-3">
                                                <img src="https://www.gstatic.com/images/branding/product/1x/drive_2020q4_48dp.png" 
                                                     alt="Google Drive" width="48" height="48" class="rounded">
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Google Drive</h6>
                                                <p class="text-muted small mb-2">Backup and sync your data</p>
                                                <div class="form-check form-switch mb-0">
                                                    <input class="form-check-input" type="checkbox" id="googleDriveToggle">
                                                    <label class="form-check-label" for="googleDriveToggle"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Dropbox -->
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <div class="d-flex align-items-start">
                                            <div class="me-3">
                                                <img src="https://cfl.dropboxstatic.com/static/images/favicon-vfl8lUR9B.ico" 
                                                     alt="Dropbox" width="48" height="48" class="rounded">
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Dropbox</h6>
                                                <p class="text-muted small mb-2">Store and share files</p>
                                                <div class="form-check form-switch mb-0">
                                                    <input class="form-check-input" type="checkbox" id="dropboxToggle">
                                                    <label class="form-check-label" for="dropboxToggle"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Slack -->
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <div class="d-flex align-items-start">
                                            <div class="me-3">
                                                <img src="https://a.slack-edge.com/80588/img/icons/ios-256.png" 
                                                     alt="Slack" width="48" height="48" class="rounded">
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Slack</h6>
                                                <p class="text-muted small mb-2">Get notifications in Slack</p>
                                                <div class="form-check form-switch mb-0">
                                                    <input class="form-check-input" type="checkbox" id="slackToggle">
                                                    <label class="form-check-label" for="slackToggle"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Zapier -->
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <div class="d-flex align-items-start">
                                            <div class="me-3">
                                                <img src="https://cdn.zapier.com/zapier/images/favicon/favicon.png" 
                                                     alt="Zapier" width="48" height="48" class="rounded">
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Zapier</h6>
                                                <p class="text-muted small mb-2">Connect with 3,000+ apps</p>
                                                <a href="#" class="btn btn-sm btn-outline-primary">Connect</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- More Integrations -->
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body text-center">
                                        <div class="p-4">
                                            <i class="bi bi-grid-3x3-gap text-muted" style="font-size: 2rem;"></i>
                                            <h5 class="mt-3">More Integrations</h5>
                                            <p class="text-muted">Explore more apps that work with Expense Tracker</p>
                                            <button class="btn btn-outline-primary">
                                                <i class="bi bi-plus-lg me-1"></i> Browse Integrations
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Advanced Settings -->
            <div class="tab-pane fade" id="advanced">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Advanced Settings</h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            These settings are intended for advanced users only. Changing these settings may affect the functionality of the application.
                        </div>
                        
                        <form id="advancedSettingsForm">
                            <h6 class="mb-3">Data Management</h6>
                            <div class="mb-3">
                                <label for="dataRetention" class="form-label">Data Retention Period</label>
                                <select class="form-select" id="dataRetention">
                                    <option value="30">30 days</option>
                                    <option value="90">90 days</option>
                                    <option value="180">6 months</option>
                                    <option value="365" selected>1 year</option>
                                    <option value="730">2 years</option>
                                    <option value="0">Forever</option>
                                </select>
                                <div class="form-text">How long to keep your transaction history</div>
                            </div>
                            
                            <div class="mb-4">
                                <label for="cacheControl" class="form-label">Cache Control</label>
                                <select class="form-select" id="cacheControl">
                                    <option value="auto" selected>Automatic (Recommended)</option>
                                    <option value="1">1 hour</option>
                                    <option value="6">6 hours</option>
                                    <option value="24">24 hours</option>
                                    <option value="0">Disable caching</option>
                                </select>
                                <div class="form-text">How often to refresh cached data</div>
                            </div>
                            
                            <h6 class="mb-3">Performance</h6>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="hardwareAcceleration" checked>
                                <label class="form-check-label" for="hardwareAcceleration">
                                    Enable Hardware Acceleration
                                </label>
                                <div class="form-text">Improves performance on supported devices</div>
                            </div>
                            
                            <div class="form-check form-switch mb-4">
                                <input class="form-check-input" type="checkbox" id="lazyLoading" checked>
                                <label class="form-check-label" for="lazyLoading">
                                    Enable Lazy Loading
                                </label>
                                <div class="form-text">Load images and content as you scroll</div>
                            </div>
                            
                            <h6 class="mb-3">Developer Options</h6>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="developerMode">
                                <label class="form-check-label" for="developerMode">
                                    Developer Mode
                                </label>
                                <div class="form-text">Enable additional debugging tools</div>
                            </div>
                            
                            <div id="developerOptions" class="ms-4 mb-4" style="display: none;">
                                <div class="mb-3">
                                    <label for="apiEndpoint" class="form-label">API Endpoint</label>
                                    <input type="text" class="form-control" id="apiEndpoint" 
                                           value="https://api.expensetracker.com/v1">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="logLevel" class="form-label">Log Level</label>
                                    <select class="form-select" id="logLevel">
                                        <option value="error">Error</option>
                                        <option value="warn">Warning</option>
                                        <option value="info" selected>Info</option>
                                        <option value="debug">Debug</option>
                                        <option value="trace">Trace</option>
                                    </select>
                                </div>
                                
                                <button type="button" class="btn btn-outline-secondary btn-sm mb-3" id="clearCacheBtn">
                                    <i class="bi bi-trash me-1"></i> Clear Cache
                                </button>
                                
                                <button type="button" class="btn btn-outline-secondary btn-sm mb-3 ms-2" id="exportLogsBtn">
                                    <i class="bi bi-download me-1"></i> Export Logs
                                </button>
                            </div>
                            
                            <div class="d-flex justify-content-between mt-5">
                                <button type="button" class="btn btn-outline-danger" id="resetSettingsBtn">
                                    <i class="bi bi-arrow-counterclockwise me-1"></i> Reset to Defaults
                                </button>
                                
                                <div>
                                    <button type="button" class="btn btn-secondary me-2">
                                        Cancel
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-save me-1"></i> Save Changes
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Delete Account Modal -->
<div class="modal fade" id="deleteAccountModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-danger">Delete Your Account</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="post" action="{% url 'expenses:delete_account' %}">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="alert alert-danger">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i>
                        <strong>Warning:</strong> This action cannot be undone. All your data will be permanently deleted.
                    </div>
                    
                    <p>Before you proceed, please confirm that you want to delete your account. This will:</p>
                    <ul>
                        <li>Permanently delete all your personal information</li>
                        <li>Remove all your transactions, budgets, and categories</li>
                        <li>Cancel any active subscriptions</li>
                        <li>Delete all your data from our servers</li>
                    </ul>
                    
                    <div class="mb-3">
                        <label for="deleteReason" class="form-label">Reason for leaving (optional)</label>
                        <select class="form-select" id="deleteReason" name="reason">
                            <option value="">Select a reason</option>
                            <option value="not_using">I'm not using this service anymore</option>
                            <option value="found_better">I found a better alternative</option>
                            <option value="too_expensive">It's too expensive</option>
                            <option value="missing_features">Missing features I need</option>
                            <option value="too_complex">Too complicated to use</option>
                            <option value="privacy">Privacy concerns</option>
                            <option value="other">Other reason</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="deleteFeedback" class="form-label">Your feedback (optional)</label>
                        <textarea class="form-control" id="deleteFeedback" name="feedback" 
                                  rows="3" placeholder="Please let us know how we can improve..."></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">
                            To confirm, please enter your password:
                        </label>
                        <input type="password" class="form-control" id="confirmPassword" 
                               name="password" placeholder="Your password" required>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="deleteConfirm1" required>
                        <label class="form-check-label" for="deleteConfirm1">
                            I understand that all my data will be permanently deleted.
                        </label>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="deleteConfirm2" required>
                        <label class="form-check-label" for="deleteConfirm2">
                            I have exported any data I want to keep.
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger" id="confirmDeleteBtn">
                        <i class="bi bi-trash me-1"></i> Permanently Delete My Account
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.theme-preview {
    width: 100px;
    height: 75px;
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}

.theme-preview:hover {
    transform: translateY(-2px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.theme-preview.light {
    background-color: #ffffff;
    border: 1px solid #dee2e6;
}

.theme-preview.dark {
    background-color: #212529;
    border: 1px solid #495057;
}

.theme-preview.system {
    background: linear-gradient(135deg, #ffffff 50%, #212529 50%);
    border: 1px solid #dee2e6;
}

input[type="radio"]:checked + label .theme-preview {
    border: 2px solid #0d6efd;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

.pricing-option {
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    padding: 1rem;
    margin-bottom: 1rem;
    transition: all 0.2s;
    cursor: pointer;
}

.pricing-option:hover {
    border-color: #0d6efd;
    background-color: rgba(13, 110, 253, 0.05);
}

.pricing-option .form-check-input:checked + label {
    border-color: #0d6efd;
    background-color: rgba(13, 110, 253, 0.05);
}

.payment-method {
    transition: all 0.2s;
}

.payment-method:hover {
    transform: translateY(-2px);
}

.payment-method .form-check-input:checked + .form-check-label {
    border-color: #0d6efd;
    background-color: rgba(13, 110, 253, 0.05);
}

.integration-card {
    transition: transform 0.2s, box-shadow 0.2s;
}

.integration-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.avatar-option {
    transition: transform 0.2s;
    cursor: pointer;
}

.avatar-option:hover {
    transform: scale(1.1);
}

.avatar-option.selected {
    position: relative;
}

.avatar-option.selected::after {
    content: '✓';
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: #0d6efd;
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle developer options
    const developerModeToggle = document.getElementById('developerMode');
    const developerOptions = document.getElementById('developerOptions');
    
    if (developerModeToggle && developerOptions) {
        developerModeToggle.addEventListener('change', function() {
            if (this.checked) {
                developerOptions.style.display = 'block';
            } else {
                developerOptions.style.display = 'none';
            }
        });
    }
    
    // Clear cache button
    const clearCacheBtn = document.getElementById('clearCacheBtn');
    if (clearCacheBtn) {
        clearCacheBtn.addEventListener('click', function() {
            // Here you would typically clear the application cache
            alert('Cache cleared successfully!');
        });
    }
    
    // Export logs button
    const exportLogsBtn = document.getElementById('exportLogsBtn');
    if (exportLogsBtn) {
        exportLogsBtn.addEventListener('click', function() {
            // Here you would typically export the application logs
            alert('Logs exported successfully!');
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = document.getElementById('resetSettingsBtn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', function() {
            if (confirm('Are you sure you want to reset all settings to their default values?')) {
                // Here you would typically reset the settings
                alert('Settings have been reset to their default values.');
                location.reload();
            }
        });
    }
    
    // Toggle email notification options
    const emailNotifications = document.getElementById('emailNotifications');
    const emailNotificationOptions = document.getElementById('emailNotificationOptions');
    
    if (emailNotifications && emailNotificationOptions) {
        function toggleEmailOptions() {
            emailNotificationOptions.style.opacity = emailNotifications.checked ? '1' : '0.5';
            emailNotificationOptions.style.pointerEvents = emailNotifications.checked ? 'auto' : 'none';
            
            const inputs = emailNotificationOptions.querySelectorAll('input');
            inputs.forEach(input => {
                input.disabled = !emailNotifications.checked;
            });
        }
        
        emailNotifications.addEventListener('change', toggleEmailOptions);
        toggleEmailOptions(); // Initialize
    }
    
    // Toggle push notification options
    const pushNotifications = document.getElementById('pushNotifications');
    const pushNotificationOptions = document.getElementById('pushNotificationOptions');
    
    if (pushNotifications && pushNotificationOptions) {
        function togglePushOptions() {
            pushNotificationOptions.style.opacity = pushNotifications.checked ? '1' : '0.5';
            pushNotificationOptions.style.pointerEvents = pushNotifications.checked ? 'auto' : 'none';
            
            const inputs = pushNotificationOptions.querySelectorAll('input');
            inputs.forEach(input => {
                input.disabled = !pushNotifications.checked;
            });
        }
        
        pushNotifications.addEventListener('change', togglePushOptions);
        togglePushOptions(); // Initialize
    }
    
    // Handle form submissions
    const forms = ['generalSettingsForm', 'notificationSettingsForm', 'privacySettingsForm', 'advancedSettingsForm'];
    
    forms.forEach(formId => {
        const form = document.getElementById(formId);
        if (form) {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                // Here you would typically save the form data
                const toast = new bootstrap.Toast(document.getElementById('settingsSavedToast'));
                toast.show();
            });
        }
    });
    
    // Handle delete account confirmation
    const confirmEmailInput = document.getElementById('confirmEmail');
    const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
    
    if (confirmEmailInput && confirmDeleteBtn) {
        confirmEmailInput.addEventListener('input', function() {
            confirmDeleteBtn.disabled = this.value.toLowerCase() !== '{{ user.email|lower }}';
        });
    }
});
</script>

<!-- Toast Notifications -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="settingsSavedToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <i class="bi bi-check-circle-fill text-success me-2"></i>
            <strong class="me-auto">Settings Saved</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            Your settings have been saved successfully.
        </div>
    </div>
    
    <div id="avatarUpdatedToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <i class="bi bi-check-circle-fill text-success me-2"></i>
            <strong class="me-auto">Success</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            Your profile picture has been updated successfully.
        </div>
    </div>
</div>
{% endblock %}
